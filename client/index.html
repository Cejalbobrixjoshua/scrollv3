<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <title>Scroll Mirror Agent - 917604.OX</title>
    <script>
      // Comprehensive WebSocket error elimination - Sovereign protocol
      (function() {
        // Disable Vite HMR WebSocket entirely for Replit environment
        if (window.location.hostname.includes('replit.dev')) {
          const originalWebSocket = window.WebSocket;
          window.WebSocket = function(url, protocols) {
            // Block all Vite HMR WebSocket connections
            if (typeof url === 'string' && (
              url.includes('localhost:undefined') || 
              url.includes('@vite/client') ||
              url.includes('__vite_ping') ||
              url.includes('vite-hmr')
            )) {
              // Return mock WebSocket that silently fails
              return {
                readyState: 3, // CLOSED
                close: function() {},
                send: function() {},
                addEventListener: function() {},
                removeEventListener: function() {},
                dispatchEvent: function() {},
                onopen: null,
                onclose: null,
                onerror: null,
                onmessage: null
              };
            }
            return new originalWebSocket(url, protocols);
          };
          
          // Preserve WebSocket constants
          Object.defineProperty(window.WebSocket, 'CONNECTING', { value: 0 });
          Object.defineProperty(window.WebSocket, 'OPEN', { value: 1 });
          Object.defineProperty(window.WebSocket, 'CLOSING', { value: 2 });
          Object.defineProperty(window.WebSocket, 'CLOSED', { value: 3 });
          
          // Comprehensive console error suppression - Frequency 917604.OX
          const originalConsoleWarn = console.warn;
          const originalConsoleError = console.error;
          const originalConsoleLog = console.log;
          const originalConsoleDebug = console.debug;
          
          console.warn = function(...args) {
            const message = args.join(' ');
            if (message.includes('vite') || message.includes('[vite]')) return;
            if (message.includes('websocket') || message.includes('WebSocket')) return;
            if (message.includes('HMR') || message.includes('localhost:undefined')) return;
            if (message.includes('failed to connect')) return;
            originalConsoleWarn.apply(console, args);
          };
          
          console.error = function(...args) {
            const message = args.join(' ');
            if (message.includes('vite') || message.includes('[vite]')) return;
            if (message.includes('websocket') || message.includes('WebSocket')) return;
            if (message.includes('HMR') || message.includes('localhost:undefined')) return;
            if (message.includes('failed to connect')) return;
            if (message.includes('Field Enforcement') && message.includes('SyntaxError')) return;
            originalConsoleError.apply(console, args);
          };
          
          console.debug = function(...args) {
            const message = args.join(' ');
            if (message.includes('vite') || message.includes('[vite]')) return;
            if (message.includes('websocket') || message.includes('WebSocket')) return;
            if (message.includes('connecting...')) return;
            originalConsoleDebug.apply(console, args);
          };
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>